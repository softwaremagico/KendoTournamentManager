<app-mat-spinner-overlay [overlay]="true"></app-mat-spinner-overlay>
<div cdkDropListGroup class="league-creator">
  <div (cdkDropListDropped)="removeTeam($event)" [cdkDropListData]="teamListData.filteredTeams"
       cdkDropList class="teams-container">
    <team-list [teamListData]="teamListData"></team-list>
  </div>
  <div class="sorted-teams">
    <h2>{{'teamsOrder' | translate}}</h2>
    <div (cdkDropListDropped)="dropTeam($event)" [cdkDropListData]="teamsOrder"
         cdkDropList class="final-team-list">
      <app-team-card *ngFor="let team of teamsOrder" [team]="team"></app-team-card>
    </div>
    <div *ngIf="needsMaximizeFights || needsDrawResolution || needsFifoWinner" class="extra-properties">
      <mat-slide-toggle *ngIf="needsMaximizeFights"
                        [formControl]="avoidDuplicates">{{'avoidDuplicateFights' | translate }}
      </mat-slide-toggle>
      <mat-form-field *ngIf="needsDrawResolution">
        <mat-label>{{'drawResolution' | translate}}</mat-label>
        <mat-select (selectionChange)="selectDrawResolution($event.value)" [(value)]="selectedDrawResolution">
          <mat-option *ngFor="let resolution of drawResolution" [matTooltipShowDelay]="500"
                      [value]="resolution" matTooltip="{{getDrawResolutionHintTag(resolution) | translate}}">
            {{getDrawResolutionTranslationTag(resolution) | translate}}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-slide-toggle *ngIf="needsFifoWinner" [checked]="firstInFirstOut" (change)="fifoToggle($event)"
                        [matTooltipShowDelay]="1000" matTooltip="{{'leagueFifoHint' | translate}}">
        {{'leagueFifo' | translate }}
      </mat-slide-toggle>
    </div>
  </div>
</div>
<div class="button-container" mat-dialog-actions>
  <button (click)="sortedTeams()" *ngIf="(RbacActivity.CREATE_FIGHT | rbac : this.rbacService.activities)"
          class="fight-button" mat-flat-button
          mat-raised-button>
    <mat-icon>auto_fix_high</mat-icon>
    {{'wizard' | translate}}
  </button>
  <button (click)="randomTeams()" *ngIf="(RbacActivity.CREATE_FIGHT | rbac : this.rbacService.activities)"
          class="fight-button" mat-flat-button
          mat-raised-button>
    <mat-icon>casino</mat-icon>
    {{'random' | translate}}
  </button>
  <button (click)="acceptAction()" *ngIf="(RbacActivity.CREATE_FIGHT | rbac : this.rbacService.activities)"
          [disabled]="teamsOrder.length===0 || teamListData.teams.length>0" class="fight-button" color="primary"
          mat-flat-button
          mat-raised-button>
    <mat-icon>done</mat-icon>
    {{'accept' | translate}}
  </button>
  <button (click)="cancelDialog()" color="accent" mat-flat-button mat-raised-button>
    <mat-icon>cancel</mat-icon>
    {{'cancel' | translate}}
  </button>
</div>
