<ng-container id="tournament-roles" *transloco="let t">
  <biit-progress-bar *ngIf="loadingGlobal" [type]="BiitProgressBarType.INDETERMINATE"></biit-progress-bar>
  <div class="canvas" slot="{{'empty' | transloco}}">
    <div cdkDropListGroup class="league-creator">
      <div (cdkDropListDropped)="removeTeam($event)" [cdkDropListData]="teamListData.filteredTeams"
           cdkDropList class="teams-container">
        <team-list [teamListData]="teamListData"></team-list>
      </div>
      <div class="sorted-teams">
        <h2>{{ 'teamsOrder' | transloco }}</h2>
        <button id="edit-options-button" biit-icon icon="column_selection"
                *ngIf="(RbacActivity.EDIT_TOURNAMENT | hasPermission)"
                class="settings-button"
                (click)="openExtraProperties=true">
        </button>
        <div (cdkDropListDropped)="dropTeam($event)" [cdkDropListData]="teamsOrder"
             cdkDropList class="final-team-list">
          <team-card *ngFor="let team of teamsOrder" [team]="team"></team-card>
        </div>

      </div>
    </div>
    <div class="button-container">
      <button biit-button secondary
              (click)="balancedTeams()"
              *ngIf="(tournament.type == TournamentType.KING_OF_THE_MOUNTAIN || tournament.type == TournamentType.LOOP || tournament.type == TournamentType.BUBBLE_SORT
    || tournament.type == TournamentType.SENBATSU)
          && (RbacActivity.CREATE_FIGHT | hasPermission)">
        {{ 'wizard' | transloco }}
      </button>
      <button biit-button secondary
              class="reverse-button"
              (click)="reverseTeams()"
              *ngIf="(RbacActivity.CREATE_FIGHT | hasPermission)"
              matTooltip="{{'reverseOrderHint' | transloco}}">
        {{ 'reverseOrder' | transloco }}
      </button>
      <button biit-button secondary
              (click)="sortedTeams()" *ngIf="(RbacActivity.CREATE_FIGHT | hasPermission)"
              class="sorted-button">
        {{ 'sorted' | transloco }}
      </button>
      <button biit-button secondary
              (click)="randomTeams()" *ngIf="(RbacActivity.CREATE_FIGHT | hasPermission)"
              class="random-button">
        {{ 'random' | transloco }}
      </button>
      <button biit-button secondary
              (click)="cancelDialog()">
        {{ 'cancel' | transloco }}
      </button>
      <button biit-button primary
              (click)="acceptAction()" *ngIf="(RbacActivity.CREATE_FIGHT | hasPermission)"
              [disabled]="teamsOrder.length===0 || teamListData.teams.length>0" class="fight-button">
        {{ 'accept' | transloco }}
      </button>
    </div>
  </div>


  <biit-popup id="custom-properties-popup" *ngIf="openExtraProperties"
              [title]="t('tournamentProperties')"
  >
    <tournament-extra-properties-form
      [tournament]="tournament"
      (onClosed)="openExtraProperties=false">
    </tournament-extra-properties-form>
  </biit-popup>
</ng-container>
