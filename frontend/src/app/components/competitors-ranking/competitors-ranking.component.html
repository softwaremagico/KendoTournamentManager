<app-mat-spinner-overlay [overlay]="true"></app-mat-spinner-overlay>
<div class="table-container" *transloco="let t">
  <div class="days-selector" *ngIf="!this.club && !this.tournament">
      <biit-input-text id="days-selector-input" [(ngModel)]="numberOfDays"
                       [placeholder]="t('daysFrom')"
                       [type]="Type.NUMBER"
                       [min]="0"
                       [max]="10000"
                       (onActionPerformed)="daysChanged()"
      ></biit-input-text>
    <button (click)="daysChanged()" class="day-input" biit-icon icon="refresh">
    </button>
  </div>
  <table class="competitor-ranking-table">
    <caption class="table-caption">{{ 'competitorsRanking' | transloco }}</caption>
    <thead>
    <tr>
      <th class="competitor-ranking-header">{{ 'competitor' | transloco }}</th>
      <th class="competitor-ranking-header">{{ 'duelsWon' | transloco }}</th>
      <th class="competitor-ranking-header">{{ 'duelsDraw' | transloco }}</th>
      <th class="competitor-ranking-header">{{ 'hitsWon' | transloco }}</th>
      <th *ngIf="tournament && tournament.tournamentScore && tournament.tournamentScore.scoreType == ScoreType.EUROPEAN"
          class="competitor-ranking-header">{{ 'hitsLost' | transloco }}
      </th>
      <th class="competitor-ranking-header">{{ 'totalFights' | transloco }}</th>
    </tr>
    </thead>
    <tr *ngFor="let scoreOfCompetitor of competitorsScore; let i = index">
      <td [id]="scoreOfCompetitor.competitor.id" [ngClass]="{
          'selected': competitor?.id === scoreOfCompetitor.competitor.id
        }"
          class="competitor-ranking-value competitor-name">{{ showIndex ? i + 1 + ". " : "" }}{{ scoreOfCompetitor.competitor.lastname }}
        , {{ scoreOfCompetitor.competitor.name }}
      </td>
      <td [ngClass]="{'selected': competitor?.id === scoreOfCompetitor.competitor.id}"
          class="competitor-ranking-value">{{ scoreOfCompetitor.wonDuels }}{{ (scoreOfCompetitor.untieDuels ? "*" : "") }}
      </td>
      <td [ngClass]="{'selected': competitor?.id === scoreOfCompetitor.competitor.id}"
          class="competitor-ranking-value">{{ scoreOfCompetitor.drawDuels }}
      </td>
      <td [ngClass]="{'selected': competitor?.id === scoreOfCompetitor.competitor.id}"
          class="competitor-ranking-value">{{ scoreOfCompetitor.hits }}{{ (scoreOfCompetitor.untieHits ? "*" : "") }}
      </td>
      <td *ngIf="tournament && tournament.tournamentScore && tournament.tournamentScore.scoreType == ScoreType.EUROPEAN"
          [ngClass]="{'selected': competitor?.id === scoreOfCompetitor.competitor.id}"
          class="competitor-ranking-value">{{ scoreOfCompetitor.hitsLost }}
      </td>
      <td [ngClass]="{'selected': competitor?.id === scoreOfCompetitor.competitor.id}"
          class="competitor-ranking-value">{{ scoreOfCompetitor.totalFights }}
      </td>
    </tr>
  </table>
</div>
<div class="button-container">
  <button biit-button (click)="downloadPDF()" *ngIf="(RbacActivity.DOWNLOAD_PDF | hasPermission)"
          secondary>
    {{ 'download' | transloco }}
  </button>
  <button biit-button (click)="closeDialog()">{{ 'close' | transloco }}</button>
</div>
